

const cheerio = require('cheerio');
const request = require('request');
const fs = require ('fs');

module.exports = Joke;

const url = 'https://www.fmylife.com/random/';

function Joke()
{
}

 Joke.prototype.aJoke = function()
{
		request(url, (error, response, html) => {
		
		if(!error)
		{
			var content = cheerio.load(html);
			//content(".panel-content").filter( () =>
			//content(".panel-content > a").each( () =>
			var data = content(".panel-content");
			//{
				//var link = content(this);
				var text = data.children().first().children().first().text().trim(); // a
				console.log(text);
				console.log("Process finished.");
				return text;
			//})
		}
		else
		{
			console.log("A mysterious error happened! :( ");
			return "There is an error";
		}
	})
}

//exports = module.exports = joke;